
{{- $mainStyles := resources.Get "css/main.css" -}}
{{- $fontStyles := resources.Get "css/fonts.css" -}}

{{- $css := slice $fontStyles $mainStyles | resources.Concat "css/main.css" | resources.Minify | resources.Fingerprint -}}

{{- $mainJs := resources.Get "js/main.js" | resources.Minify | resources.Fingerprint -}}

<!doctype html>
<html lang="{{ .Site.LanguageCode }}">
  <head>
    <title>
      {{/* If not home page, add use site title + page title */}}
      {{ if ne page.IsHome true }}
        {{ .Site.Title }} | {{ .Page.Title }}{{ else }}
        {{ .Page.Title }}
      {{ end }}
    </title>

    {{/* setup base meta tags */}}
    <meta charset="utf-8" />
    <meta name="description" content="{{ if .Params.Summary }}{{ .Params.Summary }}{{ else }}{{ .Site.Params.Description }}{{ end }}">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {{/* setup opengraph meta tags - https://ogp.me/ */}} 
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Organization for Ethical Source">
    <meta property="og:locale" content="en_US">
    <meta property="og:image" content="https://ethicalsource.dev/images/oes-logo-color.jpg">
    <meta property-="og:title" content="{{ if ne page.IsHome true }}{{ .Site.Title }} | {{ .Page.Title }}{{ else }}{{ .Page.Title }}{{ end }}">
    <meta property="og:url" content="{{ .Permalink }}">
    <meta property="og:description" content="{{ if .Params.Summary }}{{ .Params.Summary }}{{ else }}{{ .Site.Params.Description }}{{ end }}">

    {{/* setup link tags for stylesheets and icons */}}
    <link rel="stylesheet" href="{{ $css.RelPermalink }}" integrity="{{ $css.Data.Integrity }}">
    <link rel="shortcut icon" type="image/x-icon" href="{{ .Site.Params.favicon }}" />
    <link rel="icon" hreg="{{ .Site.Params.favicon }}">
 </head>

  <body{{ with .Section }} id="{{ . }}"{{ end }}>
    {{ partialCached "header" . }}
    <div id="veil">
      {{ block "main" . }}{{ end }}
      {{ partialCached "footer" }}
    </div>

    {{ partial "navigation" . }}

    <script src="{{ $mainJs.RelPermalink }}" integrity="{{ $mainJs.Data.Integrity }}"></script>
  </body>
</html>
